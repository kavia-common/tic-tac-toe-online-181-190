{"is_source_file": true, "format": "Python", "description": "This file defines the REST API routes for managing Tic Tac Toe game sessions, including creating, listing, retrieving, applying player moves, and applying AI moves. It uses FastAPI for routing and request handling, and interacts with domain logic and storage through dependencies.", "external_files": ["src.api.errors", "src.api.deps", "src.domain", "src.schemas", "src.storage.repository"], "external_methods": ["not_found", "bad_request", "repository_dependency", "create_new_game", "apply_move", "ai_pick_move", "to_game_state_response"], "published": ["create_game", "list_games", "get_game", "post_move", "post_ai_move"], "classes": [{"name": "ListGamesResponse", "description": "Response model for listing games, including pagination info and list of game states."}, {"name": "AiMoveResponse", "description": "Response payload for AI move result, including the move and current game state."}], "methods": [{"name": "GameStateResponse create_game( payload: GameCreateRequest, repo: Repository = Depends(repository_dependency), )", "description": "Creates a new tic-tac-toe game with optional AI mode and persists it.", "scope": "", "scopeKind": ""}, {"name": "ListGamesResponse list_games( offset: int = Query(0, ge=0, description=\"Pagination offset\"), limit: int = Query(50, ge=1, le=200, description=\"Pagination limit\"), repo: Repository = Depends(repository_dependency), )", "description": "Returns a paginated list of existing games.", "scope": "", "scopeKind": ""}, {"name": "GameStateResponse get_game( game_id: str = Path(..., description=\"Game identifier\"), repo: Repository = Depends(repository_dependency), )", "description": "Retrieves the current state of a specific game by its ID.", "scope": "", "scopeKind": ""}, {"name": "GameStateResponse post_move( game_id: str, payload: MoveRequest, repo: Repository = Depends(repository_dependency), )", "description": "Applies a player's move to a game, updating the game state.", "scope": "", "scopeKind": ""}, {"name": "AiMoveResponse post_ai_move( game_id: str, repo: Repository = Depends(repository_dependency), )", "description": "Requests the AI to make a move in an AI mode game and updates the game state accordingly.", "scope": "", "scopeKind": ""}], "calls": ["create_new_game", "apply_move", "ai_pick_move", "to_game_state_response", "repo.create_game", "repo.list_games", "repo.get_game", "repo.update_game"], "search-terms": ["FastAPI", "tic-tac-toe", "game management", "API router", "AI move", "apply move", "game creation", "list games", "get game"], "state": 2, "file_id": 13, "knowledge_revision": 28, "git_revision": "17aeb052574e109f2be1aa266acc551c56e7f8ba", "ctags": [{"_type": "tag", "name": "AiMoveResponse", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^class AiMoveResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ListGamesResponse", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^class ListGamesResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "count", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^    count: int = Field(..., description=\"Number of items in this page.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ListGamesResponse", "scopeKind": "class"}, {"_type": "tag", "name": "create_game", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^def create_game($/", "language": "Python", "typeref": "typename:GameStateResponse", "kind": "function", "signature": "( payload: GameCreateRequest, repo: Repository = Depends(repository_dependency), )"}, {"_type": "tag", "name": "get_game", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^def get_game($/", "language": "Python", "typeref": "typename:GameStateResponse", "kind": "function", "signature": "( game_id: str = Path(..., description=\"Game identifier\"), repo: Repository = Depends(repository_dependency), )"}, {"_type": "tag", "name": "items", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^    items: List[GameStateResponse] = Field(..., description=\"Paginated list of games.\")$/", "language": "Python", "typeref": "typename:List[GameStateResponse]", "kind": "variable", "scope": "ListGamesResponse", "scopeKind": "class"}, {"_type": "tag", "name": "limit", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^    limit: int = Field(..., description=\"Limit used for this page.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ListGamesResponse", "scopeKind": "class"}, {"_type": "tag", "name": "list_games", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^def list_games($/", "language": "Python", "typeref": "typename:ListGamesResponse", "kind": "function", "signature": "( offset: int = Query(0, ge=0, description=\"Pagination offset\"), limit: int = Query(50, ge=1, le=200, description=\"Pagination limit\"), repo: Repository = Depends(repository_dependency), )"}, {"_type": "tag", "name": "move", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^    move: Optional[tuple[int, int]] = Field($/", "language": "Python", "typeref": "typename:Optional[tuple[int, int]]", "kind": "variable", "scope": "AiMoveResponse", "scopeKind": "class"}, {"_type": "tag", "name": "offset", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^    offset: int = Field(..., description=\"Offset used for this page.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "ListGamesResponse", "scopeKind": "class"}, {"_type": "tag", "name": "post_ai_move", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^def post_ai_move($/", "language": "Python", "typeref": "typename:AiMoveResponse", "kind": "function", "signature": "( game_id: str, repo: Repository = Depends(repository_dependency), )"}, {"_type": "tag", "name": "post_move", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^def post_move($/", "language": "Python", "typeref": "typename:GameStateResponse", "kind": "function", "signature": "( game_id: str, payload: MoveRequest, repo: Repository = Depends(repository_dependency), )"}, {"_type": "tag", "name": "router", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^router = APIRouter($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "state", "path": "/tmp/kavia/workspace/code-generation/tic-tac-toe-online-181-190/tic_tac_toe_backend/src/api/routers/games.py", "pattern": "/^    state: GameStateResponse = Field(..., description=\"Updated game state after AI move (if any)/", "language": "Python", "typeref": "typename:GameStateResponse", "kind": "variable", "scope": "AiMoveResponse", "scopeKind": "class"}], "hash": "0278fb1e00ef2ac6add5c47661dbc926", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/routers/games.py", "fields": [{"name": "int count", "scope": "ListGamesResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "List[GameStateResponse] items", "scope": "ListGamesResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int limit", "scope": "ListGamesResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[tuple[int, int]] move", "scope": "AiMoveResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "int offset", "scope": "ListGamesResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "GameStateResponse state", "scope": "AiMoveResponse", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"28": "17aeb052574e109f2be1aa266acc551c56e7f8ba"}]}